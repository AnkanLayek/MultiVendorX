!function(o){if("undefined"==typeof mvx_product_classify_script_data)return;var l=function(t){e(t)||t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},e=function(t){return t.is(".processing")||t.parents(".processing").length},p=function(t){t.removeClass("processing").unblock()},r=function(t){o("html, body").animate({scrollTop:t.offset().top-100},1e3)};({$search_by_name_gtin_form:o("form.search-pro-by-name-gtin"),$searched_products_name_gtin_panel:o(".searched-products-name-gtin-panel"),$categories_search_wrapper:o(".categories-search-wrapper"),$searched_categories_results:o("#searched-categories-results"),$product_categories_wrap:o(".mvx-product-categories-wrap"),$edit_product_form:o("#mvx-edit-product-form"),init:function(){this.$search_by_name_gtin_form.on("click",".search-product-name-gtin-btn",this.show_products_searched_by_name_gtin.bind(this)),this.$search_by_name_gtin_form.on("keypress",".search-product-name-gtin-keyword",this.bind_show_products_searched_by_name_gtin.bind(this)),this.$categories_search_wrapper.on("input","#search-categories-keyword",this.show_searched_categories),this.$searched_categories_results.on("click",".list-group-item",this.show_product_classify_next_level_from_searched_term),o(document.body).on("click",".mvx-product-categories-wrap .mvx-product-cat-level .cat-item a",this.show_product_classify_next_level),o(document.body).on("click",".mvx-product-categories-wrap .classified-pro-cat-btn",this.set_classified_product_terms),o(document.body).on("click",".searched-result-products-name-gtin .mvx-create-pro-duplicate-btn",this.create_duplicate_product),this.$searched_products_name_gtin_panel.hide(),this.$searched_categories_results.hide(),this.$product_categories_wrap.append('<div class="mvx-product-cat-level initial-graphic select-category-graphic">\n                                    <img src="'+mvx_product_classify_script_data.initial_graphic_url+'" alt="select category">\n                                    <h1>'+mvx_product_classify_script_data.i18n.select_cat_list+"</h1></div>")},show_products_searched_by_name_gtin:function(){l(o("form.search-pro-by-name-gtin"));var t={action:"mvx_list_a_product_by_name_or_gtin",keyword:o("input.search-product-name-gtin-keyword").val()};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:t,success:function(t){t.results?o(".searched-result-products-name-gtin").html(t.results):o(".searched-result-products-name-gtin").html("")},complete:function(){o(".searched-products-name-gtin-panel").show(),p(o("form.search-pro-by-name-gtin")),r(o(".searched-products-name-gtin-panel"))}})},bind_show_products_searched_by_name_gtin:function(t){if("13"==(t.keyCode?t.keyCode:t.which)){l(o("form.search-pro-by-name-gtin"));var e={action:"mvx_list_a_product_by_name_or_gtin",keyword:o("input.search-product-name-gtin-keyword").val()};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:e,success:function(t){t.results?o(".searched-result-products-name-gtin").html(t.results):o(".searched-result-products-name-gtin").html("")},complete:function(){o(".searched-products-name-gtin-panel").show(),p(o("form.search-pro-by-name-gtin")),r(o(".searched-products-name-gtin-panel"))}}),t.preventDefault()}},show_searched_categories:function(){var t={action:"mvx_product_classify_search_category_level",keyword:o(this).val()};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:t,success:function(t){o("#searched-categories-results").html(""),t.results&&o("#searched-categories-results").html(t.results)},complete:function(){o("#searched-categories-results").show()}})},show_product_classify_next_level:function(t){t.preventDefault(),l(o(".mvx-product-categories-wrap"));var e=o(this).closest(".mvx-product-categories-wrap"),c=o(this).parents().find(".mvx-product-category-hierarchy"),a=o(this).parent().data("term-id"),r=o(this).parent().data("taxonomy"),s=o(this),i={action:"mvx_product_classify_next_level_list_categories",term_id:a,taxonomy:r,cat_level:s.closest(".mvx-product-categories").data("cat-level")};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:i,success:function(t){t.hierarchy&&c.html(t.hierarchy),t.html_level&&(s.parents().siblings(".mvx-product-cat-level."+t.level+"-level-cat").nextAll().remove(),s.parents().siblings(".mvx-product-cat-level."+t.level+"-level-cat").remove(),t.is_final?e.append('<div class="mvx-product-cat-level '+t.level+'-level-cat cat-column select-cat-button-holder" data-level="'+t.level+'" style="width: '+m+'px">'+t.html_level+"</div>"):e.append('<div class="mvx-product-cat-level '+t.level+'-level-cat cat-column" data-level="'+t.level+'" style="width: '+m+'px">'+t.html_level+"</div>"),o(".mvx-product-cat-level").mCustomScrollbar(),h())},complete:function(){p(o(".mvx-product-categories-wrap")),o(".mvx-product-categories-wrap .mvx-product-cat-level.initial-graphic").hide(),s.parent().addClass("active").siblings().removeClass("active")}})},show_product_classify_next_level_from_searched_term:function(){l(o("#searched-categories-results"));var e=o(".mvx-product-categories-wrap"),t=(o(this).parents().find(".mvx-product-category-hierarchy"),o(this).data("term-id")),c=o(this).data("taxonomy"),a=(o(this),{action:"show_product_classify_next_level_from_searched_term",term_id:t,taxonomy:c});o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:a,success:function(t){t.html_level&&(e.html(""),e.append(t.html_level),o(".mvx-product-cat-level").mCustomScrollbar(),h(),o(".mvx-product-categories-wrap .cat-column").css("width",m))},complete:function(){r(o(".mvx-categories-level-panel")),p(o("#searched-categories-results")),o("#searched-categories-results").hide(),o(".mvx-product-categories-wrap .mvx-product-cat-level.initial-graphic").hide()}})},set_classified_product_terms:function(){l(o(this).parents(".mvx-product-cat-level"));var t=o(this).data("term-id"),e=o(this).data("taxonomy"),c=o(this),a={action:"mvx_set_classified_product_terms",term_id:t,taxonomy:e};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:a,success:function(t){window.location.href=t.url},complete:function(){p(c.parents(".mvx-product-cat-level"))}})},create_duplicate_product:function(){l(o(this).parents(".searched-result-products-name-gtin"));var t=o(this).data("product_id"),e=o(this),c={action:"mvx_create_duplicate_product",product_id:t};o.ajax({type:"post",url:mvx_product_classify_script_data.ajax_url,data:c,success:function(t){window.location.href=t.redirect_url},complete:function(){p(e.parents(".searched-result-products-name-gtin"))}})}}).init();var c,a,s=o(".mvx-product-categories-wrap"),t=s.parent(),i=o(window).width(),n=0,d=0,_=!1;1100<=i?c=3:i<=1099&&640<=i?c=2:(c=1,o(".initial-graphic").hide());var u,m=Math.floor(function w(t,e){return e=e||0,e=Math.pow(10,e),Math.floor(t*e)/e}(100/c,2)*s.width()/100);function h(){a=s.find(".cat-column").last().attr("data-level"),c<a?(n=(a-c)*m,d=t.width()+n,"left"==u?s.css({width:d,"margin-left":-n}):s.css({width:d,"margin-right":-n})):"left"==u?s.css({width:t.width(),"margin-left":0}):s.css({width:t.width(),"margin-right":0})}s.find(".cat-column").css("width",m),u=o("body").hasClass("rtl")?"right":"left",o(".cat-left-scroller").on("click",function(){0<n&&function t(){n-=m,"left"==u?s.css({"margin-left":-n}):s.css({"margin-right":-n});_=!0}()}),o(".cat-right-scroller").on("click",function(){_&&function t(){c<=a&&c*m<d-n-m&&(n+=m,"left"==u?s.css({"margin-left":-n}):s.css({"margin-right":-n}))}()}),o("#search-list-a-product-btn").on("click",function(){var t={action:"mvx_list_a_product_by_name_or_gtin",keyword:o("#search-list-a-product-key").val()};o.post(mvx_product_classify_script_data.ajax_url,t,function(t){t.results?o(".mvx-list-of-products-wrap").html(t.results):o(".mvx-list-of-products-wrap").html("")})}),o("body").on("click",".mvx-list-of-products-wrap ul li a",function(){l(o(".mvx-list-of-products-wrap"));var t={action:"mvx_create_duplicate_product",product_id:o(this).data("product_id")};o.post(mvx_product_classify_script_data.ajax_url,t,function(t){p(o(".mvx-list-of-products-wrap")),t.status&&(window.location.href=t.redirect_url)})}),o(document.body).on("click",".mvx-product-categories-wrap .list-group-item",function(){l(o(".mvx-product-categories-wrap"));var e=o(this).closest(".mvx-product-categories-wrap"),c=o(this).parents().find(".mvx-product-category-hierarchy"),a=o(this),t={action:"mvx_product_classify_next_level_list_categories",term_id:a.data("term-id"),taxonomy:a.data("taxonomy"),cat_level:a.parent().data("cat-level")};o.post(mvx_product_classify_script_data.ajax_url,t,function(t){p(o(".mvx-product-categories-wrap")),t.hierarchy&&c.html(t.hierarchy),t.html_level&&(a.parents().siblings(".mvx-pro-cat-level."+t.level+"-level-cat").remove(),e.append('<div class="mvx-pro-cat-level '+t.level+'-level-cat col-md-4">'+t.html_level+"</div>")),a.addClass("active").siblings().removeClass("active")})}),o("#search-by-term-btn").on("click",function(){var t={action:"mvx_product_classify_search_category_level",keyword:o("#search-by-term-key").val()};o.post(mvx_product_classify_script_data.ajax_url,t,function(t){t.results?o(".mvx-product-category-search-result-wrap").html(t.results):o(".mvx-product-category-search-result-wrap").html("")})})}(jQuery);